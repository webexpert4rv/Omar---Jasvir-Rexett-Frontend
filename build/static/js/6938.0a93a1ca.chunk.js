"use strict";(self.webpackChunkrexett=self.webpackChunkrexett||[]).push([[6938],{82966:(e,a,t)=>{t.d(a,{A:()=>x});var l=t(86178),s=t.n(l),n=t(65043),i=t(14282),d=t(73722),o=t(25543),r=t(49342),c=t(45394),v=t(33012),m=t(1071),u=(t(62272),t(70579));const x=e=>{let{holidayList:a,handleShowEvent:t,handleDelete:l,handleAproveDisapprove:x,approvedLoader:p,selectedIndex:h,selectedRejectIndex:j}=e;const[b,A]=(0,n.useState)(),[N,f]=(0,n.useState)(),[g,y]=(0,n.useState)("All"),[w,C]=(0,n.useState)("2024");let S=localStorage.getItem("role");(0,n.useEffect)((()=>{const e=null===a||void 0===a?void 0:a.filter((e=>"2024"==s()(null===e||void 0===e?void 0:e.date).year()));f(e),C("2024"),A(e)}),[a]);const D=null===b||void 0===b?void 0:b.filter((e=>1==(null===e||void 0===e?void 0:e.is_approved_by_client)));return(0,u.jsx)("section",{className:"",children:(0,u.jsxs)("div",{className:"card-box border shadow-none",children:["client"===S?(0,u.jsx)("div",{className:"mb-0",children:(0,u.jsx)(i.A,{className:"main-btn font-14",onClick:t,children:"+ Create New Holiday"})}):"",(0,u.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,u.jsx)("div",{className:"skill-filters",children:o.Pn.map((e=>(0,u.jsx)("span",{className:g===e?"active":"",onClick:()=>(e=>{if(y(e),"All"!==e){const a=null===N||void 0===N?void 0:N.filter((a=>s()(null===a||void 0===a?void 0:a.date).month()+1==s()(e,"MMMM").format("M")));A(a)}else A(N)})(e),children:e},e)))}),(0,u.jsx)(d.A,{className:"d-flex gap-2",children:(0,u.jsx)(d.A.Select,{className:"common-field font-14 w-auto",onChange:e=>(e=>{C(e),y("All");const t=null===a||void 0===a?void 0:a.filter((a=>s()(null===a||void 0===a?void 0:a.date).year()==e));f(t),A(t)})(e.target.value),value:w,children:null===o.Fl||void 0===o.Fl?void 0:o.Fl.map(((e,a)=>(0,u.jsx)("option",{children:e},a)))})})]}),(0,u.jsx)("div",{className:"table-responsive",children:(0,u.jsxs)("table",{className:"table table-ui-custom mb-0",children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{children:"Date"}),(0,u.jsx)("th",{children:"Name"}),"client"===S?(0,u.jsx)("th",{children:"Action"}):""]})}),(0,u.jsx)("tbody",{children:(null===b||void 0===b?void 0:b.length)>0?"developer"===S?null===D||void 0===D?void 0:D.map(((e,a)=>(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{className:"font-14 align-middle",children:(0,u.jsx)("strong",{children:null===e||void 0===e?void 0:e.date})}),(0,u.jsx)("td",{className:"font-14 align-middle",children:null===e||void 0===e?void 0:e.name})]},a)}))):null===b||void 0===b?void 0:b.map(((e,a)=>(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{className:"font-14 align-middle",children:(0,u.jsx)("strong",{children:null===e||void 0===e?void 0:e.date})}),(0,u.jsxs)("td",{className:"font-14 align-middle",children:[null===e||void 0===e?void 0:e.name,"client"===S&&"client"===(null===e||void 0===e?void 0:e.added_by)?(0,u.jsx)("span",{className:"associate-text",children:(0,u.jsx)("span",{className:"associate",children:"Created"})}):""]}),(0,u.jsx)("td",{children:"client"===S?"system"===(null===e||void 0===e?void 0:e.added_by)?!0===(null===e||void 0===e?void 0:e.is_approved_by_client)?(0,u.jsx)("div",{children:(0,u.jsx)("h6",{children:"Approved"})}):!1===(null===e||void 0===e?void 0:e.is_approved_by_client)?(0,u.jsx)("div",{children:(0,u.jsx)("h6",{children:"Disapproved"})}):(0,u.jsx)("div",{children:(0,u.jsxs)("div",{className:"d-flex gap-2",children:[(0,u.jsx)(v.A,{text:"Approve",children:(0,u.jsx)(m.A,{variant:"transparent",className:"px-3 arrow-btn primary-arrow font-16 text-decoration-none",isLoading:h==a&&p,icon:h==a?p:(0,u.jsx)(c.KDk,{}),onClick:()=>x(null===e||void 0===e?void 0:e.id,"approve",a)})}),(0,u.jsx)(v.A,{text:"Disapprove",children:(0,u.jsx)(m.A,{variant:"transparent",className:"px-3 arrow-btn danger-arrow font-16 text-decoration-none",isLoading:j==a&&p,icon:j==a?p:(0,u.jsx)(c.lr4,{}),onClick:()=>x(null===e||void 0===e?void 0:e.id,"disapprove",a)})})]})}):(0,u.jsxs)("div",{className:"d-flex gap-2",children:[(0,u.jsx)(v.A,{text:"Edit",children:(0,u.jsx)(i.A,{variant:"transparent",className:"px-3 arrow-btn info-arrow font-16 text-decoration-none",onClick:()=>t(null===e||void 0===e?void 0:e.id,"edit"),children:(0,u.jsx)(r.g4E,{})})}),(0,u.jsx)(v.A,{text:"Delete",children:(0,u.jsx)(i.A,{variant:"transparent",className:"px-3 arrow-btn danger-arrow font-16 text-decoration-none",onClick:()=>l(null===e||void 0===e?void 0:e.id),children:(0,u.jsx)(c.lr4,{})})})]}):""})]},a))):(0,u.jsx)("tr",{children:(0,u.jsx)("td",{colSpan:"3",className:"font-14",children:(0,u.jsx)("p",{className:"text-danger mb-0",children:"No holidays in this month"})})})})]})})]})})}},76938:(e,a,t)=>{t.r(a),t.d(a,{default:()=>_});var l=t(65043),s=(t(78461),t(44063)),n=t(83003),i=(t(13368),t(70579));const d=e=>{let{data:a}=e;return(0,i.jsx)("div",{children:(0,i.jsxs)("table",{className:"table time-table table-bordered table-ui-custom",children:[(0,i.jsx)("thead",{children:null===a||void 0===a?void 0:a.map((e=>(0,i.jsx)("th",{value:e,className:"time-table-head",children:e},e)))}),(0,i.jsx)("tbody",{})]})})};var o=t(69106),r=t(86178),c=t.n(r),v=t(45394),m=t(33012),u=t(25543),x=t(98394),p=t(1071),h=(t(62272),t(82476));const j=function(e){let{tableData:a,currentTab:t,handleApproveReject:l,approvedLoader:n,approveIndex:d,screenLoader:o}=e;return console.log(d,"approveINdex"),console.log(a,"tableData"),(0,i.jsx)("div",{children:o?(0,i.jsx)(h.A,{}):(null===a||void 0===a?void 0:a.length)>0?(0,i.jsx)("table",{className:"table time-table table-bordered table-ui-custom",children:(0,i.jsx)("tbody",{children:null===a||void 0===a?void 0:a.map(((e,a)=>{var o,r,x,h,j,b;return(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"time-table-data text-start",children:(0,i.jsxs)("div",{className:"d-flex align-items-center gap-2 white-nowrap",children:[(0,i.jsx)("div",{className:"user-imgbx application-userbx",children:(0,i.jsx)("img",{src:null!==e&&void 0!==e&&null!==(o=e.contract)&&void 0!==o&&null!==(r=o.developer)&&void 0!==r&&r.profile_picture?null===e||void 0===e||null===(x=e.contract)||void 0===x||null===(h=x.developer)||void 0===h?void 0:h.profile_picture:s,className:"user-img"})}),(0,i.jsx)("div",{className:"user-imgbx application-imgbx mx-0 mb-0"}),null===e||void 0===e||null===(j=e.contract)||void 0===j||null===(b=j.developer)||void 0===b?void 0:b.name]})}),(0,i.jsx)("td",{className:"time-table-data text-start",children:(0,i.jsx)("h4",{className:"leave-type-heading mb-0 white-nowrap",children:(0,u.r$)(null===e||void 0===e?void 0:e.type)})}),(0,i.jsx)("td",{className:"time-table-data text-start",children:(0,i.jsxs)("p",{className:"leave-date white-nowrap",children:[c()(null===e||void 0===e?void 0:e.start_date).format("MM-DD-YYYY")," to",c()(e.end_date).format("MM-DD-YYYY")]})}),(0,i.jsx)("td",{className:"time-table-data text-start reason-data",children:(0,i.jsx)("p",{className:"font-14 mb-0",children:null===e||void 0===e?void 0:e.reason_for_leave})}),(0,i.jsx)("td",{className:"time-table-data text-start",children:"first"!==t?(0,i.jsx)("span",{className:"status-finished",children:null===e||void 0===e?void 0:e.approval_status}):(0,i.jsxs)("div",{className:"d-flex justify-content-start gap-2",children:[(0,i.jsx)(m.A,{text:"Approve",children:(0,i.jsx)(p.A,{variant:"transparent",className:"px-3 mb-2 arrow-btn primary-arrow font-16 text-decoration-none",icon:d==a?n:(0,i.jsx)(v.KDk,{}),onClick:()=>l(null===e||void 0===e?void 0:e.id,"Approved",a),isLoading:d==a&&n})}),(0,i.jsx)(m.A,{text:"Reject",children:(0,i.jsx)(p.A,{variant:"transparent",className:"px-3 mb-2 arrow-btn danger-arrow font-16 text-decoration-none",icon:(0,i.jsx)(v.lr4,{}),onClick:()=>l(null===e||void 0===e?void 0:e.id,"Rejected",a)})})]})})]})}))})}):(0,i.jsx)("td",{colSpan:8,children:(0,i.jsx)(x.A,{})})})};var b=t(5328),A=t(92843),N=t(4970),f=t(85603),g=t(25284),y=t(73722),w=t(61072),C=t(78602),S=t(24858);const D=e=>{var a,t,s,d;let{show:o,handleClose:r,status:c}=e;const v=(0,n.wA)(),{smallLoader:m,btnLoader:u,clientHolidayList:x}=(0,n.d4)((e=>e.clientData)),{register:h,setValue:j,handleSubmit:b,reset:A,formState:{errors:f,isDirty:D,isValid:k,isSubmitting:L}}=(0,S.mN)({});(0,l.useEffect)((()=>{if("edit"==(null===c||void 0===c?void 0:c.status)){const e=null===x||void 0===x?void 0:x.find((e=>e.id==(null===c||void 0===c?void 0:c.id)));console.log(e,"selectedHoliday"),console.log(c,"status"),j("name",null===e||void 0===e?void 0:e.name),j("country",null===e||void 0===e?void 0:e.country),j("description",null===e||void 0===e?void 0:e.description),j("date",null===e||void 0===e?void 0:e.date)}else A()}),[c,x]);return(0,i.jsxs)(g.A,{show:o,onHide:e=>r(e),centered:!0,animation:!0,className:"custom-modal",children:[(0,i.jsx)(g.A.Header,{closeButton:!0,className:"border-0 pb-3"}),(0,i.jsxs)(g.A.Body,{children:["edit"===(null===c||void 0===c?void 0:c.status)?(0,i.jsx)("h3",{className:"popup-heading",children:"Edit Holiday"}):(0,i.jsx)("h3",{className:"popup-heading",children:"Create New Holiday"}),(0,i.jsx)(y.A,{onSubmit:b((async e=>{const a={country:null===e||void 0===e?void 0:e.country,name:null===e||void 0===e?void 0:e.name,description:null===e||void 0===e?void 0:e.description,date:null===e||void 0===e?void 0:e.date};"edit"==(null===c||void 0===c?void 0:c.status)?(await v((0,N.zt)(a,null===c||void 0===c?void 0:c.id)),v((0,N.of)())):(await v((0,N.un)(a)),v((0,N.of)())),r(),A()})),children:(0,i.jsxs)(w.A,{children:[(0,i.jsx)(C.A,{md:12,className:"mb-3",children:(0,i.jsxs)(y.A.Group,{children:[(0,i.jsx)(y.A.Label,{className:"d-block font-14",children:"Holiday Name"}),(0,i.jsx)(y.A.Control,{type:"text",className:"common-field font-14",...h("name",{required:{value:!0,message:"Event name is required"}})}),(0,i.jsx)("p",{className:"error-message",children:null===f||void 0===f||null===(a=f.name)||void 0===a?void 0:a.message})]})}),(0,i.jsx)(C.A,{md:6,className:"mb-3",children:(0,i.jsxs)(y.A.Group,{children:[(0,i.jsx)(y.A.Label,{className:"d-block font-14",children:"Country"}),(0,i.jsx)(y.A.Control,{type:"text",className:"common-field font-14",...h("country",{required:{value:!0,message:"Country is required"}})}),(0,i.jsx)("p",{className:"error-message",children:null===f||void 0===f||null===(t=f.name)||void 0===t?void 0:t.message})]})}),(0,i.jsx)(C.A,{md:6,className:"mb-3",children:(0,i.jsxs)(y.A.Group,{children:[(0,i.jsx)(y.A.Label,{className:"d-block font-14",children:"Description"}),(0,i.jsx)(y.A.Control,{type:"text",className:"common-field font-14",...h("description",{required:{value:!0,message:"Description is required"}})}),(0,i.jsx)("p",{className:"error-message",children:null===f||void 0===f||null===(s=f.name)||void 0===s?void 0:s.message})]})}),(0,i.jsx)(C.A,{md:6,className:"mb-3",children:(0,i.jsxs)(y.A.Group,{children:[(0,i.jsx)(y.A.Label,{className:"d-block font-14",children:"Date"}),(0,i.jsx)(y.A.Control,{type:"date",className:"common-field font-14",min:(new Date).toISOString().split("T")[0],...h("date",{required:{value:!0,message:"Date is required"}})}),(0,i.jsx)("p",{className:"error-message",children:null===f||void 0===f||null===(d=f.date)||void 0===d?void 0:d.message})]})}),(0,i.jsx)(C.A,{md:12,children:(0,i.jsxs)("div",{className:"d-flex align-items-center gap-2 justify-content-center",children:[(0,i.jsx)("div",{className:"text-center ",children:(0,i.jsx)(p.A,{type:"submit",text:"Submit",isLoading:m,disabled:m,className:"main-btn px-4 me-2 font-14 fw-semibold",variant:"transparent"})}),(0,i.jsxs)("div",{className:"text-center",children:[" ",(0,i.jsx)(p.A,{type:"button",variant:"transparent",onClick:r,text:"Cancel",isLoading:u,className:"outline-main-btn font-14 fw-semibold bg-transparent border-black text-black px-4"})]})]})})]})})]})]})};var k=t(82966),L=t(16713);const _=()=>{const e=(0,n.wA)(),[a,t]=(0,l.useState)("first"),{clientHolidayList:s}=(0,n.d4)((e=>e.clientData)),[r,c]=(0,l.useState)(null),[v,x]=(0,l.useState)(null),[p,h]=(0,l.useState)(null),[g,y]=(0,l.useState)({id:"",status:""}),{screenLoader:w,approvedLoader:C,smallLoader:S,clientLeaveHistory:_}=(0,n.d4)((e=>e.clientData)),[E,I]=(0,l.useState)(),[q,H]=(0,l.useState)(!1),[R,M]=(0,l.useState)(!1),[Y,F]=(0,l.useState)();console.log(Y,"deleteId");(0,l.useEffect)((()=>{let t;t="first"===a?{approval_status:"Under Approval"}:"second"===a?{approval_status:"Not Approved"}:"third"===a?{approval_status:"Approved"}:{approval_status:"Withdrawn"},console.log(t,"data"),e((0,N.vj)(t))}),[a]);const[K,B]=(0,l.useState)(!1);(0,l.useEffect)((()=>{e((0,N.of)())}),[]);const[G,T]=(0,l.useState)(new Date),P=(e=>{const a=null===e||void 0===e?void 0:e.map((e=>new Date(null===e||void 0===e?void 0:e.date)));return a})(s);return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(b.A.Container,{id:"left-tabs-example",defaultActiveKey:"devleave-request",children:[(0,i.jsxs)(A.A,{variant:"pills",className:"mb-4 application-pills",children:[(0,i.jsx)(A.A.Item,{className:"application-item",children:(0,i.jsx)(A.A.Link,{className:"application-link",eventKey:"devleave-request",children:"Leave Request"})}),(0,i.jsx)(A.A.Item,{className:"application-item",children:(0,i.jsx)(A.A.Link,{className:"application-link",eventKey:"public-holiday",children:"Public Holiday"})})]}),(0,i.jsxs)(b.A.Content,{children:[(0,i.jsxs)(b.A.Pane,{eventKey:"devleave-request",children:[(0,i.jsx)(o.A,{handleSelect:e=>{t(e)},tabText:u.X4,currentTab:a}),(0,i.jsx)(d,{data:(u.El[u.El.length-1]="first"===a?"Action":"Leave Status",u.El)}),(0,i.jsx)(j,{tableData:_,currentTab:a,handleApproveReject:async(a,t,l)=>{if(console.log(t,"status"),console.log(l,"index"),h(l),I(a),"Approved"===t){let l={leaveId:a,approval_status:t,rejection_reason:null};await e((0,N.FM)(l));let s={approval_status:"Under Approval"};e((0,N.vj)(s))}else M(!0)},approvedLoader:C,approveIndex:p,screenLoader:w}),R&&(0,i.jsx)(f.A,{show:R,handleClose:()=>{M(!1)},header:"Rejection Reason",feedbacks:"Reasons",submit:"Submit",handleClick:async(a,t)=>{let l={leaveId:E,approval_status:"Not Approved",rejection_reason:t};await e((0,N.FM)(l));e((0,N.vj)({approval_status:"Under Approval"})),M(!R)},smallLoader:S})]}),(0,i.jsx)(b.A.Pane,{eventKey:"public-holiday",children:(0,i.jsx)(k.A,{onChange:T,value:G,tileContent:e=>{let{date:a,view:t}=e;const l=s.find((e=>new Date(e.date).toDateString()===a.toDateString()));return"month"===t&&P.find((e=>e.toDateString()===a.toDateString()))?(0,i.jsx)(m.A,{text:null===l||void 0===l?void 0:l.name,children:(0,i.jsx)("div",{className:"dot"})}):null},holidayList:s,handleShowEvent:(e,a)=>{B(!K),y({id:e,status:a})},handleDelete:e=>{H(!q),F(e)},handleAproveDisapprove:async(a,t,l)=>{"disapprove"==t?x(l):c(l);const s={action:t};await e((0,N.Vo)(s,a));e((0,N.of)({approval_status:"Under Approval"}))},selectedIndex:r,selectedRejectIndex:v,approvedLoader:C})}),(0,i.jsx)(D,{show:K,handleClose:()=>{B(!1)},status:g}),(0,i.jsx)(L.A,{show:q,handleClose:()=>{H(!1)},onClick:async a=>{a.preventDefault(),await e((0,N.Bt)(Y)),e((0,N.of)()),H(!1)},smallLoader:S,text:"Are you sure, you want to delete this holiday"})]})]})})}},85603:(e,a,t)=>{t.d(a,{A:()=>r});var l=t(65043),s=t(25284),n=t(73722),i=t(14282),d=t(62272),o=t(70579);const r=e=>{let{show:a,handleClose:t,handleClick:r,smallLoader:c,header:v,feedbacks:m,submit:u}=e;const[x,p]=(0,l.useState)("");return(0,o.jsxs)(s.A,{show:a,onHide:t,centered:!0,className:"custom-modal",animation:!0,children:[(0,o.jsx)(s.A.Header,{closeButton:!0,className:"border-0 pb-3"}),(0,o.jsxs)(s.A.Body,{children:[(0,o.jsxs)("h3",{className:"popup-heading",children:[v," "]}),(0,o.jsxs)(n.A,{children:[(0,o.jsxs)(n.A.Group,{className:"mb-4",children:[(0,o.jsx)(n.A.Label,{children:m}),(0,o.jsx)(n.A.Control,{as:"textarea",rows:"6",placeholder:"Reasons"===m?"Enter your reason, why you want to reject the leave ?":"Enter your feedback, why you want to reject?",onChange:e=>{p(e.target.value)},required:!0})]}),(0,o.jsx)("div",{className:"text-center",children:(0,o.jsx)(i.A,{variant:"transparent",className:"main-btn px-4",onClick:e=>{let a;a="Reasons"===m?x:{status:"ended",end_reason:x},r(e,a)},disabled:0===(null===x||void 0===x?void 0:x.length),children:c?(0,o.jsx)(d.A,{}):u})})]})]})]})}}}]);
//# sourceMappingURL=6938.0a93a1ca.chunk.js.map