"use strict";(self.webpackChunkrexett=self.webpackChunkrexett||[]).push([[7617],{58175:(e,n,t)=>{t.r(n),t.d(n,{default:()=>g});var l=t(65043),o=(t(44063),t(25284)),a=t(85632),i=t(82306),s=t(61072),d=t(78602),r=t(73722),c=t(24858),m=t(13368),u=t(83003),h=t(1071),p=t(4970),v=t(74117),x=t(70579);const j=e=>{var n,t,j,f;let{show:g,handleClose:y,role:A,currentAction:b}=e;const w=(0,u.wA)(),[N,_]=(0,l.useState)([]),[E,T]=(0,l.useState)(),[C,k]=(0,l.useState)(!1),[S,D]=(0,l.useState)([]),[M,G]=(0,l.useState)(!1),[L,O]=(0,l.useState)(0),{t:R}=(0,v.Bd)(),{register:I,control:V,handleSubmit:q,watch:z,setValue:F,trigger:H,formState:{errors:B}}=(0,c.mN)(),{fields:P,append:Y,remove:U}=(0,c.jz)({control:V,name:"addTime"}),{allContracts:W,addTimeReports:K,btnLoader:J}=(0,u.d4)((e=>e.developerData));(0,l.useEffect)((()=>{w((0,m.Hh)())}),[]);(0,l.useEffect)((()=>{K.length>0?D(K):"AddTime"==b&&(()=>{const e=new Date,n=e.getDay(),t=new Date(e);t.setDate(t.getDate()-n);let l="";const o=[];for(let a=0;a<7;a++){const e=new Date(t);e.setDate(t.getDate()+a),0!==e.getDay()&&6!==e.getDay()&&(l=e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2),o.push({report_date:l}))}D(o)})()}),[K]),(0,l.useEffect)((()=>{(null===S||void 0===S?void 0:S.length)>0&&(null===S||void 0===S||S.forEach((e=>{Y({report_date:null===e||void 0===e?void 0:e.report_date,is_off_day:!0,start_time:null!==e&&void 0!==e&&e.start_time?null===e||void 0===e?void 0:e.start_time:null,end_time:null!==e&&void 0!==e&&e.start_time?null===e||void 0===e?void 0:e.end_time:null,memo:null!==e&&void 0!==e&&e.memo?null===e||void 0===e?void 0:e.memo:null}),_((n=>[...n,!!e.is_off_day&&e.is_off_day]))})))}),[S]);const Q=(e,n,t)=>{if(t){const e=[...N];e[n]=!0,_(e),F("addTime[".concat(n,"].is_off_day"),!1)}else{const e=[...N];e[n]=!1,_(e),F("addTime[".concat(n,"].is_off_day"),!0)}},X=(e,n)=>{T({...E,[n]:e.target.value})};return(0,x.jsxs)(o.A,{show:g,onHide:y,centered:!0,animation:!0,className:"custom-modal",size:"lg",scrollable:!0,children:[(0,x.jsx)(o.A.Header,{className:"border-0 pb-3",onClick:()=>{T({}),D([]),(0,m.Cr)([]),y(),O((e=>e+1))},children:(0,x.jsx)(a.A,{})}),(0,x.jsxs)(o.A.Body,{children:[(0,x.jsx)("h3",{className:"popup-heading",children:"AddTime"==b?R("addTime"):"Edit Time"}),(0,x.jsx)("form",{onSubmit:q((e=>{let n={contract_id:+(null===E||void 0===E?void 0:E.contract_id),reports:null===e||void 0===e?void 0:e.addTime};null!==E&&void 0!==E&&E.contract_id?w((0,m.IV)(n,(()=>{w((0,p.EO)({},A)),y()}))):G(!0)})),children:(0,x.jsxs)("div",{className:"experience-container",children:["AddTime"!==b?(0,x.jsx)("div",{className:"mb-3",children:(0,x.jsx)(i.A,{in:!0,children:(0,x.jsx)("div",{className:"mt-2",children:(0,x.jsxs)(s.A,{children:[(0,x.jsx)(d.A,{md:4,className:"mb-0",children:(0,x.jsxs)("div",{children:[(0,x.jsxs)(r.A.Select,{required:"true",className:"shadow-none common-field",onChange:e=>X(e,"year"),children:[(0,x.jsx)("option",{disabled:!0,selected:!0,children:R("selectYear")}),(0,x.jsx)("option",{value:"2024",children:"2024"}),(0,x.jsx)("option",{value:"2023",children:"2023"}),(0,x.jsx)("option",{value:"2022",children:"2022"}),(0,x.jsx)("option",{value:"2021",children:"2021"}),(0,x.jsx)("option",{value:"2020",children:"2020"}),(0,x.jsx)("option",{value:"2019",children:"2019"}),(0,x.jsx)("option",{value:"2018",children:"2018"}),(0,x.jsx)("option",{value:"2017",children:"2017"})]}),!(null!==E&&void 0!==E&&null!==(n=E.year)&&void 0!==n&&n.length)>0&&M?(0,x.jsx)("p",{style:{color:"red"},children:R("pleaseSelectAYear")}):""]})}),(0,x.jsx)(d.A,{md:4,className:"mb-0",children:(0,x.jsxs)("div",{children:[(0,x.jsxs)(r.A.Select,{required:!0,className:"shadow-none common-field",onChange:e=>X(e,"month"),children:[(0,x.jsx)("option",{disabled:!0,selected:!0,children:R("selectMonth")}),(0,x.jsx)("option",{value:"1",children:R("january")}),(0,x.jsx)("option",{value:"2",children:R("feburary")}),(0,x.jsx)("option",{value:"3",children:R("march")}),(0,x.jsx)("option",{value:"4",children:R("april")}),(0,x.jsx)("option",{value:"5",children:R("may")}),(0,x.jsx)("option",{value:"6",children:R("june")}),(0,x.jsx)("option",{value:"7",children:R("july")}),(0,x.jsx)("option",{value:"8",children:R("august")}),(0,x.jsx)("option",{value:"9",children:R("september")}),(0,x.jsx)("option",{value:"10",children:R("october")}),(0,x.jsx)("option",{value:"11",children:R("november")}),(0,x.jsx)("option",{value:"12",children:R("december")})]}),!(null!==E&&void 0!==E&&null!==(t=E.month)&&void 0!==t&&t.length)>0&&M?(0,x.jsx)("p",{style:{color:"red"},children:R("selectAMonth")}):""]})}),(0,x.jsxs)(d.A,{md:4,className:"mb-0",children:[(0,x.jsx)("div",{children:(0,x.jsxs)(r.A.Select,{className:"shadow-none common-field",onChange:e=>X(e,"week_number"),children:[(0,x.jsx)("option",{disabled:!0,selected:!0,children:R("selectWeek")}),(0,x.jsxs)("option",{value:"1",children:[R("week")," 1"]}),(0,x.jsxs)("option",{value:"2",children:[R("week")," 2"]}),(0,x.jsxs)("option",{value:"3",children:[R("week")," 3"]}),(0,x.jsxs)("option",{value:"4",children:[R("week")," 4"]})]})}),!(null!==E&&void 0!==E&&null!==(j=E.week_number)&&void 0!==j&&j.length)>0&&M?(0,x.jsx)("p",{style:{color:"red"},children:R("selectAWeek")}):""]})]})})})}):"",(0,x.jsx)(s.A,{children:(0,x.jsxs)(d.A,{md:12,className:"border-bottom mb-2 pb-4",children:[(0,x.jsx)(r.A.Group,{children:(0,x.jsxs)(r.A.Select,{className:"shadow-none common-field",onChange:e=>X(e,"contract_id"),children:[(0,x.jsx)("option",{disabled:!0,selected:!0,children:R("selectClientName")}),null===W||void 0===W?void 0:W.map((e=>{var n;return(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("option",{value:null===e||void 0===e?void 0:e.id,children:null===e||void 0===e||null===(n=e.client)||void 0===n?void 0:n.name})})}))]})}),!(null!==E&&void 0!==E&&null!==(f=E.contract_id)&&void 0!==f&&f.length)>0&&M?(0,x.jsx)("p",{style:{color:"red"},children:R("enterClientName")}):"","Edit"==b&&(0,x.jsx)("div",{className:"text-center mt-2",children:(0,x.jsx)(h.A,{type:"submit",text:"Get Previous Time Report",className:"main-btn px-4",variant:"transparent",onClick:e=>{e.preventDefault(),G(!0),E&&4==Object.keys(E).length&&(w((0,m.Gb)(E,(()=>{k(!1)}))),U())},isLoading:J})})]})}),!C&&"Edit"!==b||(null===K||void 0===K?void 0:K.length)>0?null===P||void 0===P?void 0:P.map(((e,n)=>(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("div",{className:"time-row",children:[(0,x.jsxs)(s.A,{className:"align-items-center",children:[(0,x.jsx)(d.A,{md:4,children:(0,x.jsx)(r.A.Label,{className:"date-text mb-0",children:null===e||void 0===e?void 0:e.report_date})}),(0,x.jsx)(d.A,{md:8,children:(0,x.jsxs)(r.A.Group,{className:"d-flex justify-content-end gap-3",children:[(0,x.jsx)(r.A.Check,{inline:!0,type:"radio",value:"work-day",name:'"day-select"'.concat(n),onChange:e=>Q(0,n,!0),className:"font-15 select-radiolabel me-0 ps-0",id:"work-day".concat(n),label:R("workDay")}),(0,x.jsx)(r.A.Check,{inline:!0,type:"radio",value:"off-day","data-value":"off-day",name:'"day-select"'.concat(n),onChange:e=>Q(0,n,!1),className:"font-15 select-radiolabel me-0 ps-0",id:'"off-day"'.concat(n),label:"Holiday"})]})})]}),(0,x.jsxs)("div",{className:N[n]?"d-flex gap-3 align-items-center mt-3":"cv-template-section cv-template1 d-none",children:[(0,x.jsxs)(r.A.Group,{children:[(0,x.jsx)(r.A.Control,{type:"time",className:"cv-field font-13 shadow-none",...I("addTime.".concat(n,".start_time"),{required:!!N[n]&&"Please Enter Time",validate:{lessThanEndTime:e=>{const t=z("addTime.".concat(n,".end_time"));return!t||parseInt(e)<parseInt(t)||"Start time must be less than End Time"}}}),defaultValue:e.start_time}),B&&B.addTime&&B.addTime[n]&&B.addTime[n].start_time&&(0,x.jsx)("p",{className:"error-message",children:B.addTime[n].start_time.message})]}),(0,x.jsx)("span",{children:"-"}),(0,x.jsx)(r.A.Group,{children:(0,x.jsx)(r.A.Control,{type:"time",className:"cv-field font-13 shadow-none",...I("addTime.".concat(n,".end_time"),{required:!!N[n]&&"Please Enter Time"}),defaultValue:e.end_time})}),N[n]?(0,x.jsx)(r.A.Group,{className:"w-100",children:(0,x.jsx)(r.A.Control,{type:"text",className:"cv-field font-13 shadow-none",placeholder:"Add Memo",...I("addTime.".concat(n,".memo"),{required:!1}),defaultValue:e.memo})}):""]})]})}))):"",(0,x.jsx)("div",{className:"text-center",children:(null===K||void 0===K?void 0:K.length)>0||S.length>0&&"Edit"!==b?(0,x.jsx)(h.A,{type:"submit",text:"Submit",className:"main-btn py-2 px-4 font-14 fw-semibold",variant:"transparent",disabled:J,isLoading:J}):""})]})})]})]})};var f=t(53197);const g=()=>{const e=(0,u.wA)(),[n,t]=(0,l.useState)(!1),[o,a]=(0,l.useState)("weekly"),[i,s]=(0,l.useState)({}),[d,r]=(0,l.useState)(null),{timeReportingData:c,smallLoader:m}=(0,u.d4)((e=>e.clientData));(0,l.useEffect)((()=>{let n={...i,filter:o};e((0,p.EO)(n,"developer"))}),[e]);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(f.A,{timeReportingData:c,handleShowModal:e=>{t(!0),r(e)},role:"developer"}),n?(0,x.jsx)(j,{show:n,handleClose:()=>{t(!1)},role:"developer",currentAction:d}):""]})}},82306:(e,n,t)=>{t.d(n,{A:()=>x});var l=t(98139),o=t.n(l),a=t(8747),i=t(65043),s=t(21358),d=t(33492);const r=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.filter((e=>null!=e)).reduce(((e,n)=>{if("function"!==typeof n)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?n:function(){for(var t=arguments.length,l=new Array(t),o=0;o<t;o++)l[o]=arguments[o];e.apply(this,l),n.apply(this,l)}}),null)};var c=t(92643),m=t(14910),u=t(70579);const h={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function p(e,n){const t=n["offset".concat(e[0].toUpperCase()).concat(e.slice(1))],l=h[e];return t+parseInt((0,a.A)(n,l[0]),10)+parseInt((0,a.A)(n,l[1]),10)}const v={[s.kp]:"collapse",[s.ze]:"collapsing",[s.ns]:"collapsing",[s._K]:"collapse show"},x=i.forwardRef(((e,n)=>{let{onEnter:t,onEntering:l,onEntered:a,onExit:s,onExiting:h,className:x,children:j,dimension:f="height",in:g=!1,timeout:y=300,mountOnEnter:A=!1,unmountOnExit:b=!1,appear:w=!1,getDimensionValue:N=p,..._}=e;const E="function"===typeof f?f():f,T=(0,i.useMemo)((()=>r((e=>{e.style[E]="0"}),t)),[E,t]),C=(0,i.useMemo)((()=>r((e=>{const n="scroll".concat(E[0].toUpperCase()).concat(E.slice(1));e.style[E]="".concat(e[n],"px")}),l)),[E,l]),k=(0,i.useMemo)((()=>r((e=>{e.style[E]=null}),a)),[E,a]),S=(0,i.useMemo)((()=>r((e=>{e.style[E]="".concat(N(E,e),"px"),(0,c.A)(e)}),s)),[s,N,E]),D=(0,i.useMemo)((()=>r((e=>{e.style[E]=null}),h)),[E,h]);return(0,u.jsx)(m.A,{ref:n,addEndListener:d.A,..._,"aria-expanded":_.role?g:null,onEnter:T,onEntering:C,onEntered:k,onExit:S,onExiting:D,childRef:j.ref,in:g,timeout:y,mountOnEnter:A,unmountOnExit:b,appear:w,children:(e,n)=>i.cloneElement(j,{...n,className:o()(x,j.props.className,v[e],"width"===E&&"collapse-horizontal")})})}))}}]);
//# sourceMappingURL=7617.dbf50362.chunk.js.map