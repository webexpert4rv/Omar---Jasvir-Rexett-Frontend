"use strict";(self.webpackChunkrexett=self.webpackChunkrexett||[]).push([[8175],{58175:(e,n,t)=>{t.r(n),t.d(n,{default:()=>g});var l=t(65043),i=(t(44063),t(25284)),s=t(85632),o=t(82306),a=t(61072),d=t(78602),r=t(73722),c=t(24858),m=t(13368),u=t(83003),h=t(1071),p=t(4970),v=t(74117),x=t(70579);const j=e=>{var n,t,j,f;let{show:g,handleClose:y,role:A,currentAction:b}=e;const w=(0,u.wA)(),[N,_]=(0,l.useState)([]),[E,T]=(0,l.useState)(),[C,k]=(0,l.useState)(!1),[S,D]=(0,l.useState)([]),[$,M]=(0,l.useState)(!1),[G,L]=(0,l.useState)(0),{t:O}=(0,v.Bd)(),{register:R,control:I,handleSubmit:V,watch:q,setValue:z,trigger:F,formState:{errors:H}}=(0,c.mN)(),{fields:B,append:P,remove:Y}=(0,c.jz)({control:I,name:"addTime"}),{allContracts:U,addTimeReports:W,btnLoader:K}=(0,u.d4)((e=>e.developerData));(0,l.useEffect)((()=>{w((0,m.Hh)())}),[]);(0,l.useEffect)((()=>{W.length>0?D(W):"AddTime"==b&&(()=>{const e=new Date,n=e.getDay(),t=new Date(e);t.setDate(t.getDate()-n);let l="";const i=[];for(let s=0;s<7;s++){const e=new Date(t);e.setDate(t.getDate()+s),0!==e.getDay()&&6!==e.getDay()&&(l=e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2),i.push({report_date:l}))}D(i)})()}),[W]),(0,l.useEffect)((()=>{(null===S||void 0===S?void 0:S.length)>0&&(null===S||void 0===S||S.forEach((e=>{P({report_date:null===e||void 0===e?void 0:e.report_date,is_off_day:!0,start_time:null!==e&&void 0!==e&&e.start_time?null===e||void 0===e?void 0:e.start_time:null,end_time:null!==e&&void 0!==e&&e.start_time?null===e||void 0===e?void 0:e.end_time:null,memo:null!==e&&void 0!==e&&e.memo?null===e||void 0===e?void 0:e.memo:null}),_((n=>[...n,!!e.is_off_day&&e.is_off_day]))})))}),[S]);const J=(e,n,t)=>{if(t){const e=[...N];e[n]=!0,_(e),z(`addTime[${n}].is_off_day`,!1)}else{const e=[...N];e[n]=!1,_(e),z(`addTime[${n}].is_off_day`,!0)}},Q=(e,n)=>{T({...E,[n]:e.target.value})};return(0,x.jsxs)(i.A,{show:g,onHide:y,centered:!0,animation:!0,className:"custom-modal",size:"lg",scrollable:!0,children:[(0,x.jsx)(i.A.Header,{className:"border-0 pb-3",onClick:()=>{T({}),D([]),(0,m.Cr)([]),y(),L((e=>e+1))},children:(0,x.jsx)(s.A,{})}),(0,x.jsxs)(i.A.Body,{children:[(0,x.jsx)("h3",{className:"popup-heading",children:"AddTime"==b?O("addTime"):"Edit Time"}),(0,x.jsx)("form",{onSubmit:V((e=>{let n={contract_id:+(null===E||void 0===E?void 0:E.contract_id),reports:null===e||void 0===e?void 0:e.addTime};null!==E&&void 0!==E&&E.contract_id?w((0,m.IV)(n,(()=>{w((0,p.EO)({},A)),y()}))):M(!0)})),children:(0,x.jsxs)("div",{className:"experience-container",children:["AddTime"!==b?(0,x.jsx)("div",{className:"mb-3",children:(0,x.jsx)(o.A,{in:!0,children:(0,x.jsx)("div",{className:"mt-2",children:(0,x.jsxs)(a.A,{children:[(0,x.jsx)(d.A,{md:4,className:"mb-0",children:(0,x.jsxs)("div",{children:[(0,x.jsxs)(r.A.Select,{required:"true",className:"shadow-none common-field",onChange:e=>Q(e,"year"),children:[(0,x.jsx)("option",{disabled:!0,selected:!0,children:O("selectYear")}),(0,x.jsx)("option",{value:"2024",children:"2024"}),(0,x.jsx)("option",{value:"2023",children:"2023"}),(0,x.jsx)("option",{value:"2022",children:"2022"}),(0,x.jsx)("option",{value:"2021",children:"2021"}),(0,x.jsx)("option",{value:"2020",children:"2020"}),(0,x.jsx)("option",{value:"2019",children:"2019"}),(0,x.jsx)("option",{value:"2018",children:"2018"}),(0,x.jsx)("option",{value:"2017",children:"2017"})]}),!(null!==E&&void 0!==E&&null!==(n=E.year)&&void 0!==n&&n.length)>0&&$?(0,x.jsx)("p",{style:{color:"red"},children:O("pleaseSelectAYear")}):""]})}),(0,x.jsx)(d.A,{md:4,className:"mb-0",children:(0,x.jsxs)("div",{children:[(0,x.jsxs)(r.A.Select,{required:!0,className:"shadow-none common-field",onChange:e=>Q(e,"month"),children:[(0,x.jsx)("option",{disabled:!0,selected:!0,children:O("selectMonth")}),(0,x.jsx)("option",{value:"1",children:O("january")}),(0,x.jsx)("option",{value:"2",children:O("feburary")}),(0,x.jsx)("option",{value:"3",children:O("march")}),(0,x.jsx)("option",{value:"4",children:O("april")}),(0,x.jsx)("option",{value:"5",children:O("may")}),(0,x.jsx)("option",{value:"6",children:O("june")}),(0,x.jsx)("option",{value:"7",children:O("july")}),(0,x.jsx)("option",{value:"8",children:O("august")}),(0,x.jsx)("option",{value:"9",children:O("september")}),(0,x.jsx)("option",{value:"10",children:O("october")}),(0,x.jsx)("option",{value:"11",children:O("november")}),(0,x.jsx)("option",{value:"12",children:O("december")})]}),!(null!==E&&void 0!==E&&null!==(t=E.month)&&void 0!==t&&t.length)>0&&$?(0,x.jsx)("p",{style:{color:"red"},children:O("selectAMonth")}):""]})}),(0,x.jsxs)(d.A,{md:4,className:"mb-0",children:[(0,x.jsx)("div",{children:(0,x.jsxs)(r.A.Select,{className:"shadow-none common-field",onChange:e=>Q(e,"week_number"),children:[(0,x.jsx)("option",{disabled:!0,selected:!0,children:O("selectWeek")}),(0,x.jsxs)("option",{value:"1",children:[O("week")," 1"]}),(0,x.jsxs)("option",{value:"2",children:[O("week")," 2"]}),(0,x.jsxs)("option",{value:"3",children:[O("week")," 3"]}),(0,x.jsxs)("option",{value:"4",children:[O("week")," 4"]})]})}),!(null!==E&&void 0!==E&&null!==(j=E.week_number)&&void 0!==j&&j.length)>0&&$?(0,x.jsx)("p",{style:{color:"red"},children:O("selectAWeek")}):""]})]})})})}):"",(0,x.jsx)(a.A,{children:(0,x.jsxs)(d.A,{md:12,className:"border-bottom mb-2 pb-4",children:[(0,x.jsx)(r.A.Group,{children:(0,x.jsxs)(r.A.Select,{className:"shadow-none common-field",onChange:e=>Q(e,"contract_id"),children:[(0,x.jsx)("option",{disabled:!0,selected:!0,children:O("selectClientName")}),null===U||void 0===U?void 0:U.map((e=>{var n;return(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("option",{value:null===e||void 0===e?void 0:e.id,children:null===e||void 0===e||null===(n=e.client)||void 0===n?void 0:n.name})})}))]})}),!(null!==E&&void 0!==E&&null!==(f=E.contract_id)&&void 0!==f&&f.length)>0&&$?(0,x.jsx)("p",{style:{color:"red"},children:O("enterClientName")}):"","Edit"==b&&(0,x.jsx)("div",{className:"text-center mt-2",children:(0,x.jsx)(h.A,{type:"submit",text:"Get Previous Time Report",className:"main-btn px-4",variant:"transparent",onClick:e=>{e.preventDefault(),M(!0),E&&4==Object.keys(E).length&&(w((0,m.Gb)(E,(()=>{k(!1)}))),Y())},isLoading:K})})]})}),!C&&"Edit"!==b||(null===W||void 0===W?void 0:W.length)>0?null===B||void 0===B?void 0:B.map(((e,n)=>(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("div",{className:"time-row",children:[(0,x.jsxs)(a.A,{className:"align-items-center",children:[(0,x.jsx)(d.A,{md:4,children:(0,x.jsx)(r.A.Label,{className:"date-text mb-0",children:null===e||void 0===e?void 0:e.report_date})}),(0,x.jsx)(d.A,{md:8,children:(0,x.jsxs)(r.A.Group,{className:"d-flex justify-content-end gap-3",children:[(0,x.jsx)(r.A.Check,{inline:!0,type:"radio",value:"work-day",name:`"day-select"${n}`,onChange:e=>J(0,n,!0),className:"font-15 select-radiolabel me-0 ps-0",id:`work-day${n}`,label:O("workDay")}),(0,x.jsx)(r.A.Check,{inline:!0,type:"radio",value:"off-day","data-value":"off-day",name:`"day-select"${n}`,onChange:e=>J(0,n,!1),className:"font-15 select-radiolabel me-0 ps-0",id:`"off-day"${n}`,label:"Holiday"})]})})]}),(0,x.jsxs)("div",{className:N[n]?"d-flex gap-3 align-items-center mt-3":"cv-template-section cv-template1 d-none",children:[(0,x.jsxs)(r.A.Group,{children:[(0,x.jsx)(r.A.Control,{type:"time",className:"cv-field font-13 shadow-none",...R(`addTime.${n}.start_time`,{required:!!N[n]&&"Please Enter Time",validate:{lessThanEndTime:e=>{const t=q(`addTime.${n}.end_time`);return!t||parseInt(e)<parseInt(t)||"Start time must be less than End Time"}}}),defaultValue:e.start_time}),H&&H.addTime&&H.addTime[n]&&H.addTime[n].start_time&&(0,x.jsx)("p",{className:"error-message",children:H.addTime[n].start_time.message})]}),(0,x.jsx)("span",{children:"-"}),(0,x.jsx)(r.A.Group,{children:(0,x.jsx)(r.A.Control,{type:"time",className:"cv-field font-13 shadow-none",...R(`addTime.${n}.end_time`,{required:!!N[n]&&"Please Enter Time"}),defaultValue:e.end_time})}),N[n]?(0,x.jsx)(r.A.Group,{className:"w-100",children:(0,x.jsx)(r.A.Control,{type:"text",className:"cv-field font-13 shadow-none",placeholder:"Add Memo",...R(`addTime.${n}.memo`,{required:!1}),defaultValue:e.memo})}):""]})]})}))):"",(0,x.jsx)("div",{className:"text-center",children:(null===W||void 0===W?void 0:W.length)>0||S.length>0&&"Edit"!==b?(0,x.jsx)(h.A,{type:"submit",text:"Submit",className:"main-btn py-2 px-4 font-14 fw-semibold",variant:"transparent",disabled:K,isLoading:K}):""})]})})]})]})};var f=t(53197);const g=()=>{const e=(0,u.wA)(),[n,t]=(0,l.useState)(!1),[i,s]=(0,l.useState)("weekly"),[o,a]=(0,l.useState)({}),[d,r]=(0,l.useState)(null),{timeReportingData:c,smallLoader:m}=(0,u.d4)((e=>e.clientData));(0,l.useEffect)((()=>{let n={...o,filter:i};e((0,p.EO)(n,"developer"))}),[e]);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(f.A,{timeReportingData:c,handleShowModal:e=>{t(!0),r(e)},role:"developer"}),n?(0,x.jsx)(j,{show:n,handleClose:()=>{t(!1)},role:"developer",currentAction:d}):""]})}},82306:(e,n,t)=>{t.d(n,{A:()=>x});var l=t(98139),i=t.n(l),s=t(8747),o=t(65043),a=t(21358),d=t(33492);const r=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.filter((e=>null!=e)).reduce(((e,n)=>{if("function"!==typeof n)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?n:function(){for(var t=arguments.length,l=new Array(t),i=0;i<t;i++)l[i]=arguments[i];e.apply(this,l),n.apply(this,l)}}),null)};var c=t(92643),m=t(14910),u=t(70579);const h={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function p(e,n){const t=n[`offset${e[0].toUpperCase()}${e.slice(1)}`],l=h[e];return t+parseInt((0,s.A)(n,l[0]),10)+parseInt((0,s.A)(n,l[1]),10)}const v={[a.kp]:"collapse",[a.ze]:"collapsing",[a.ns]:"collapsing",[a._K]:"collapse show"},x=o.forwardRef(((e,n)=>{let{onEnter:t,onEntering:l,onEntered:s,onExit:a,onExiting:h,className:x,children:j,dimension:f="height",in:g=!1,timeout:y=300,mountOnEnter:A=!1,unmountOnExit:b=!1,appear:w=!1,getDimensionValue:N=p,..._}=e;const E="function"===typeof f?f():f,T=(0,o.useMemo)((()=>r((e=>{e.style[E]="0"}),t)),[E,t]),C=(0,o.useMemo)((()=>r((e=>{const n=`scroll${E[0].toUpperCase()}${E.slice(1)}`;e.style[E]=`${e[n]}px`}),l)),[E,l]),k=(0,o.useMemo)((()=>r((e=>{e.style[E]=null}),s)),[E,s]),S=(0,o.useMemo)((()=>r((e=>{e.style[E]=`${N(E,e)}px`,(0,c.A)(e)}),a)),[a,N,E]),D=(0,o.useMemo)((()=>r((e=>{e.style[E]=null}),h)),[E,h]);return(0,u.jsx)(m.A,{ref:n,addEndListener:d.A,..._,"aria-expanded":_.role?g:null,onEnter:T,onEntering:C,onEntered:k,onExit:S,onExiting:D,childRef:j.ref,in:g,timeout:y,mountOnEnter:A,unmountOnExit:b,appear:w,children:(e,n)=>o.cloneElement(j,{...n,className:i()(x,j.props.className,v[e],"width"===E&&"collapse-horizontal")})})}))}}]);
//# sourceMappingURL=8175.c5b74e49.chunk.js.map