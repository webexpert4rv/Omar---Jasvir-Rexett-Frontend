"use strict";(self.webpackChunkrexett=self.webpackChunkrexett||[]).push([[1997],{54922:(e,l,s)=>{s.d(l,{A:()=>_});var a=s(65043),o=s(61072),t=s(78602),r=s(73722),n=s(60184),i=s(3538),d=s(83003),u=s(74117),c=s(4970),m=s(13368),v=s(82476),p=s(1071),b=s(16713),x=s(75210),h=s(22630);var y=s(24858),j=s(2364);var f=s(70579);const A=e=>{var l;let{control:s,name:o,errors:t,options:n,required:i,label:d,type:u}=e;const[c,m]=(0,a.useState)([]);return(0,a.useEffect)((()=>{const e=((e,l)=>{console.log(e,"options inside countries select");let s=[];return s="timezones"===l?null===e||void 0===e?void 0:e.map((e=>({label:e,value:e}))):null===e||void 0===e?void 0:e.map((e=>{let{name:s,code:a,isoCode:o}=e;return{label:s,value:"country"===l?a:o}})),s})(n,u);m(e)}),[n]),(0,f.jsxs)(r.A.Group,{className:"mb-3",children:[(0,f.jsxs)(r.A.Label,{className:"common-label",children:[d,i&&"*"]}),(0,f.jsx)(y.xI,{name:o,control:s,rules:{required:{value:!!i,message:i}},render:e=>{let{field:l}=e;return(0,f.jsx)(j.Ay,{className:"common-field",...l,options:c})}}),t[o]&&(0,f.jsx)("p",{className:"error-message",children:null===(l=t[o])||void 0===l?void 0:l.message})]})};s(37194);const _=e=>{var l;let{role:s}=e;const j=localStorage.getItem("userId"),[_,g]=(0,a.useState)(null),[w,N]=(0,a.useState)(!1),[P,q]=(0,a.useState)(!1),{allTimeZones:C,countriesList:k,statesList:S,citiesList:L,timeZones:F}=(0,d.d4)((e=>e.clientData)),{t:z}=(0,u.Bd)(),{register:D,setValue:T,watch:I,control:E,handleSubmit:Z,formState:{errors:B,isDirty:H,isValid:V,isSubmitting:$}}=(0,y.mN)({}),G=(0,d.wA)(),[Y,K]=(0,a.useState)(!1),[M,O]=(0,a.useState)("inactive"),[R,Q]=(0,a.useState)({firstPass:!1,secondPass:!1}),[U,X]=(0,a.useState)(null),{smallLoader:J,userProfileDetails:W,screenLoader:ee}=(0,d.d4)((e=>e.developerData)),le="AIzaSyABX4LTqTLQGg_b3jFOH8Z6_H5CDqn8tbc";(0,a.useEffect)((()=>{let e=(e=>({developer:"developer/get-profile",admin:"admin/profile",client:"client/get-profile"}[e]))(s);G((0,m.i7)(e)),G((0,c.Zg)())}),[G]),(0,a.useEffect)((()=>{var e,l,s;null!==(e=I("country"))&&void 0!==e&&e.value&&(G((0,c.tM)(null===(l=I("country"))||void 0===l?void 0:l.value)),G((0,c.HM)(null===(s=I("country"))||void 0===s?void 0:s.value)),T("time_zone",null),T("state",null))}),[I("country")]),(0,a.useEffect)((()=>{var e,l,s;null!==(e=I("state"))&&void 0!==e&&e.value&&(G((0,c.YF)(null===(l=I("country"))||void 0===l?void 0:l.value,null===(s=I("state"))||void 0===s?void 0:s.value)),T("city",null))}),[I("state")]),(0,a.useEffect)((()=>{var e,l,s,a,o,t,r,n,i,d,u,c,m;null!==W&&void 0!==W&&W.data&&(T("name",null===W||void 0===W||null===(e=W.data)||void 0===e?void 0:e.name),T("email",null===W||void 0===W||null===(l=W.data)||void 0===l?void 0:l.email),T("phone_number",null===W||void 0===W||null===(s=W.data)||void 0===s?void 0:s.phone_number),T("address",null===W||void 0===W||null===(a=W.data)||void 0===a?void 0:a.address),T("address_2",null===W||void 0===W||null===(o=W.data)||void 0===o?void 0:o.address_2),T("city",{label:null===W||void 0===W||null===(t=W.data)||void 0===t?void 0:t.city,value:null}),T("country",{label:null===W||void 0===W||null===(r=W.data)||void 0===r?void 0:r.country,value:null}),T("passcode",null===W||void 0===W||null===(n=W.data)||void 0===n?void 0:n.passcode),T("time_zone",{label:null===W||void 0===W||null===(i=W.data)||void 0===i?void 0:i.time_zone,value:null===W||void 0===W||null===(d=W.data)||void 0===d?void 0:d.time_zone}),T("state",{label:null===W||void 0===W||null===(u=W.data)||void 0===u?void 0:u.state,value:null}),null!==W&&void 0!==W&&null!==(c=W.data)&&void 0!==c&&c.is_2FA_enabled?T("is_2FA_enabled",null===W||void 0===W||null===(m=W.data)||void 0===m?void 0:m.is_2FA_enabled):T("is_2FA_enabled",!1))}),[W]);const se=e=>{if(""===e)return!0;if(!/^(?=.*\d)(?=.*[!@#$%^&*])(?=.*[a-z])(?=.*[A-Z]).{8,}$/.test(e))return"Password must contain at least a symbol, upper and lower case letters and a number";return!0},ae=()=>N(!1);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{children:ee?(0,f.jsx)(v.A,{}):(0,f.jsxs)("form",{onSubmit:Z((e=>{let l=(e=>({developer:"common/update-profile/",admin:"admin/update-profile",client:"client/update-profile/"}[e]))(s),a=new FormData,o=new FormData;for(const s in e)a.append(s,e[s]);if(o.append("file",U),null==U){var t,r,n,i,d;let s={...e,user_id:j,country:null===e||void 0===e||null===(t=e.country)||void 0===t?void 0:t.label,country_iso_code:null===e||void 0===e?void 0:e.country.value,state:null===e||void 0===e||null===(r=e.state)||void 0===r?void 0:r.label,state_iso_code:null===e||void 0===e||null===(n=e.state)||void 0===n?void 0:n.value,time_zone:null===e||void 0===e||null===(i=e.time_zone)||void 0===i?void 0:i.label,city:null===e||void 0===e||null===(d=e.city)||void 0===d?void 0:d.label};G((0,m.Vk)(s,l))}else G((0,c.C7)(o,(s=>{var a,o,t,r,n;let i={...e,profile_picture:s,user_id:j,country:null===e||void 0===e||null===(a=e.country)||void 0===a?void 0:a.label,country_iso_code:null===e||void 0===e?void 0:e.country.value,state:null===e||void 0===e||null===(o=e.state)||void 0===o?void 0:o.label,state_iso_code:null===e||void 0===e||null===(t=e.state)||void 0===t?void 0:t.value,time_zone:null===e||void 0===e||null===(r=e.time_zone)||void 0===r?void 0:r.label,city:null===e||void 0===e||null===(n=e.city)||void 0===n?void 0:n.label};G((0,m.Vk)(i,l))})))})),noValidate:!0,children:[(0,f.jsxs)(o.A,{className:"mb-4",children:[(0,f.jsx)(t.A,{md:"6",children:(0,f.jsxs)("div",{className:"inner-form",children:[(0,f.jsx)(x.A,{label:z("clientName")+" *",name:"name",control:E,rules:{required:"Name is required"},error:B.name}),(0,f.jsx)(x.A,{label:z("email")+" *",name:"email",control:E,rules:{required:"Email is required",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Invalid email format"}},error:B.email,readOnly:!0}),(0,f.jsx)(x.A,{label:z("previousPassword"),name:"previous_password",control:E,type:R.firstPass?"text":"password",rules:{validate:se},error:B.previous_password,isPassword:!0,onTogglePassword:()=>Q({...R,firstPass:!R.firstPass}),icon:(0,f.jsx)(n.Ny1,{})}),(0,f.jsx)(x.A,{label:z("newPassword"),name:"password",control:E,type:R.secondPass?"text":"password",rules:{validate:se},error:B.password,isPassword:!0,onTogglePassword:()=>Q({...R,secondPass:!R.secondPass}),icon:(0,f.jsx)(n.Ny1,{})}),(0,f.jsx)(h.A,{label:z("address")+" *",name:"address",control:E,rules:{required:"Address is required"},error:B.address,apiKey:le,onPlaceSelected:e=>{T("address",e.formatted_address)},onChange:e=>{T("address",e.target.value)},options:{types:["establishment","geocode"]},r:!0}),(0,f.jsx)(h.A,{label:z("address")+" 2",name:"address_2",control:E,rules:{required:!1},error:B.address_2,apiKey:le,onPlaceSelected:e=>{T("address_2",e.formatted_address)},onChange:e=>{T("address_2",e.target.value)},options:{types:["establishment","geocode"]}})]})}),(0,f.jsx)(t.A,{md:"6",children:(0,f.jsxs)("div",{children:[(0,f.jsx)(x.A,{label:z("phone")+"*",name:"phone_number",control:E,type:"text",rules:{required:"Phone Number is required",pattern:{value:/^[0-9]{10}$/,message:"Please enter a valid phone number"}},error:B.phone_number}),(0,f.jsx)(A,{name:"country",errors:B,control:E,required:"Country is required",label:"Country",type:"country",options:k}),(0,f.jsx)(A,{name:"state",errors:B,control:E,required:"State is required",label:"State",type:"state",options:S}),(0,f.jsx)(A,{name:"city",errors:B,control:E,label:"City",type:"city",options:L}),(0,f.jsx)(A,{name:"time_zone",errors:B,type:"timezones",control:E,options:F,required:"Time zone is required",label:"Time Zone"}),(0,f.jsx)(x.A,{label:z("postCode")+"*",name:"passcode",control:E,rules:{required:"Postcode is required",pattern:{value:/^[0-9]+$/,message:"Postcode should only contain numbers"}},error:B.passcode}),(0,f.jsx)(r.A.Label,{children:"Image*"}),(0,f.jsxs)(r.A.Label,{htmlFor:"developer-image",className:"upload-image-label d-block",children:[(0,f.jsx)(i.pT4,{}),z("uploadImage")]}),(0,f.jsx)(y.xI,{name:"profile_picture",control:E,rules:{required:!1},render:e=>{let{field:l}=e;return(0,f.jsx)("input",{...l,id:"developer-image",className:"visually-hidden common-field",type:"file",accept:"image/*",onChange:e=>(e=>{const l=e.target.files[0];if(X(l),l){const e=new FileReader;e.onloadend=()=>{g(e.result)},e.readAsDataURL(l)}})(e)})}}),(0,f.jsx)("div",{children:(0,f.jsx)("img",{src:_||(null===W||void 0===W||null===(l=W.data)||void 0===l?void 0:l.profile_picture),alt:"Selected",className:"uploaded-image"})})]})}),(0,f.jsx)(t.A,{md:"6",children:(0,f.jsxs)(r.A.Group,{className:"mb-3",children:[(0,f.jsx)(r.A.Label,{className:"common-label",children:"Enable Two Factor Authentication"}),(0,f.jsx)("div",{class:"form-check form-switch toggle-switch-wrapper",children:(0,f.jsx)(y.xI,{name:"is_2FA_enabled",control:E,render:e=>{let{field:l}=e;return(0,f.jsx)("input",{...l,onChange:e=>{(e=>{const{checked:l}=null===e||void 0===e?void 0:e.target;N(!w),q(l)})(e)},checked:!0===I("is_2FA_enabled"),class:"form-check-input toggle-switch-custom",type:"checkbox",role:"switch"})}})})]})})]}),(0,f.jsx)("div",{className:"text-center",children:(0,f.jsx)(p.A,{type:"submit",text:z("updateProfile"),className:"main-btn px-5",variant:"transparent",disabled:J,isLoading:J})})]})}),(0,f.jsx)(b.A,{show:Y,handleClose:()=>{O(!M),K(!1)},onClick:()=>{let e={user_id:+j,status:M};G((0,c.Ts)(e))},smallLoader:J,text:"Are you sure, you want to disable your account"}),w&&(0,f.jsx)(b.A,{show:w,handleClose:ae,handleAction:()=>{T("is_2FA_enabled",P),ae()},smallLoader:J,text:"Are you sure, you want to ".concat(P?"enable":"disable"," two factor authentication")})]})}},33027:(e,l,s)=>{s.d(l,{A:()=>t});s(65043);var a=s(74117),o=s(70579);const t=e=>{let{children:l}=e;const{t:s}=(0,a.Bd)();return(0,o.jsxs)("section",{className:"card-box",children:[(0,o.jsx)("div",{className:"d-flex gap-3 align-items-center pb-2 mb-3 border-bottom-grey",children:(0,o.jsx)("h2",{className:"section-head-sub mb-0 border-0",children:s("updateYourProfile")})}),l]})}},1997:(e,l,s)=>{s.r(l),s.d(l,{default:()=>r});s(65043);var a=s(54922),o=s(33027),t=s(70579);const r=()=>(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(o.A,{children:(0,t.jsx)(a.A,{role:"developer"})})})},16713:(e,l,s)=>{s.d(l,{A:()=>i});s(65043);var a=s(25284),o=s(73722),t=s(14282),r=s(1071),n=(s(4970),s(70579));const i=e=>{let{text:l,show:s,handleClose:i,onClick:d,handleAction:u,smallLoader:c,type:m,startDate:v,endDate:p}=e;return(0,n.jsxs)(a.A,{show:s,onHide:e=>i(e),centered:!0,animation:!0,className:"custom-modal",children:[(0,n.jsx)(a.A.Header,{closeButton:!0,className:"border-0 pb-3"}),(0,n.jsx)(a.A.Body,{children:(0,n.jsxs)(o.A,{children:[(0,n.jsx)(o.A.Group,{className:"mb-4",children:(0,n.jsx)(o.A.Label,{className:"d-block text-center",children:l})}),(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)(r.A,{type:"submit",text:"Yes",onClick:m?e=>{d(e,{status:m})}:u,className:"main-btn px-4 me-3 font-14 fw-semibold",variant:"transparent",disabled:c,isLoading:c}),(0,n.jsx)(t.A,{variant:"transparent",onClick:i,className:"outline-main-btn font-14 fw-semibold bg-transparent border-black text-black px-4",children:"No"})]})]})})]})}}}]);
//# sourceMappingURL=1997.3c4baf72.chunk.js.map