"use strict";(self.webpackChunkrexett=self.webpackChunkrexett||[]).push([[6938],{82966:(e,a,t)=>{t.d(a,{A:()=>x});var s=t(86178),l=t.n(s),n=t(65043),i=t(14282),d=t(73722),o=t(25543),r=t(49342),c=t(45394),v=t(33012),u=t(1071),m=(t(62272),t(70579));const x=e=>{let{holidayList:a,handleShowEvent:t,handleDelete:s,handleAproveDisapprove:x,approvedLoader:p,selectedIndex:h,selectedRejectIndex:j}=e;const[b,f]=(0,n.useState)(),[N,A]=(0,n.useState)(),[g,y]=(0,n.useState)("All"),[w,C]=(0,n.useState)("2024");let _=localStorage.getItem("role");(0,n.useEffect)((()=>{const e=null===a||void 0===a?void 0:a.filter((e=>"2024"==l()(null===e||void 0===e?void 0:e.date).year()));A(e),C("2024"),f(e)}),[a]);const S=null===b||void 0===b?void 0:b.filter((e=>1==(null===e||void 0===e?void 0:e.is_approved_by_client)));return(0,m.jsx)("section",{className:"",children:(0,m.jsxs)("div",{className:"card-box border shadow-none",children:["client"===_?(0,m.jsx)("div",{className:"mb-0",children:(0,m.jsx)(i.A,{className:"main-btn font-14",onClick:t,children:"+ Create New Holiday"})}):"",(0,m.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,m.jsx)("div",{className:"skill-filters",children:o.Pn.map((e=>(0,m.jsx)("span",{className:g===e?"active":"",onClick:()=>(e=>{if(y(e),"All"!==e){const a=null===N||void 0===N?void 0:N.filter((a=>l()(null===a||void 0===a?void 0:a.date).month()+1==l()(e,"MMMM").format("M")));f(a)}else f(N)})(e),children:e},e)))}),(0,m.jsx)(d.A,{className:"d-flex gap-2",children:(0,m.jsx)(d.A.Select,{className:"common-field font-14 w-auto",onChange:e=>(e=>{C(e),y("All");const t=null===a||void 0===a?void 0:a.filter((a=>l()(null===a||void 0===a?void 0:a.date).year()==e));A(t),f(t)})(e.target.value),value:w,children:null===o.Fl||void 0===o.Fl?void 0:o.Fl.map(((e,a)=>(0,m.jsx)("option",{children:e},a)))})})]}),(0,m.jsx)("div",{className:"table-responsive",children:(0,m.jsxs)("table",{className:"table table-ui-custom mb-0",children:[(0,m.jsx)("thead",{children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{children:"Date"}),(0,m.jsx)("th",{children:"Name"}),"client"===_?(0,m.jsx)("th",{children:"Action"}):""]})}),(0,m.jsx)("tbody",{children:(null===b||void 0===b?void 0:b.length)>0?"developer"===_?null===S||void 0===S?void 0:S.map(((e,a)=>(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{className:"font-14 align-middle",children:(0,m.jsx)("strong",{children:null===e||void 0===e?void 0:e.date})}),(0,m.jsx)("td",{className:"font-14 align-middle",children:null===e||void 0===e?void 0:e.name})]},a)}))):null===b||void 0===b?void 0:b.map(((e,a)=>(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{className:"font-14 align-middle",children:(0,m.jsx)("strong",{children:null===e||void 0===e?void 0:e.date})}),(0,m.jsxs)("td",{className:"font-14 align-middle",children:[null===e||void 0===e?void 0:e.name,"client"===_&&"client"===(null===e||void 0===e?void 0:e.added_by)?(0,m.jsx)("span",{className:"associate-text",children:(0,m.jsx)("span",{className:"associate",children:"Created"})}):""]}),(0,m.jsx)("td",{children:"client"===_?"system"===(null===e||void 0===e?void 0:e.added_by)?!0===(null===e||void 0===e?void 0:e.is_approved_by_client)?(0,m.jsx)("div",{children:(0,m.jsx)("h6",{children:"Approved"})}):!1===(null===e||void 0===e?void 0:e.is_approved_by_client)?(0,m.jsx)("div",{children:(0,m.jsx)("h6",{children:"Disapproved"})}):(0,m.jsx)("div",{children:(0,m.jsxs)("div",{className:"d-flex gap-2",children:[(0,m.jsx)(v.A,{text:"Approve",children:(0,m.jsx)(u.A,{variant:"transparent",className:"px-3 arrow-btn primary-arrow font-16 text-decoration-none",isLoading:h==a&&p,icon:h==a?p:(0,m.jsx)(c.KDk,{}),onClick:()=>x(null===e||void 0===e?void 0:e.id,"approve",a)})}),(0,m.jsx)(v.A,{text:"Disapprove",children:(0,m.jsx)(u.A,{variant:"transparent",className:"px-3 arrow-btn danger-arrow font-16 text-decoration-none",isLoading:j==a&&p,icon:j==a?p:(0,m.jsx)(c.lr4,{}),onClick:()=>x(null===e||void 0===e?void 0:e.id,"disapprove",a)})})]})}):(0,m.jsxs)("div",{className:"d-flex gap-2",children:[(0,m.jsx)(v.A,{text:"Edit",children:(0,m.jsx)(i.A,{variant:"transparent",className:"px-3 arrow-btn info-arrow font-16 text-decoration-none",onClick:()=>t(null===e||void 0===e?void 0:e.id,"edit"),children:(0,m.jsx)(r.g4E,{})})}),(0,m.jsx)(v.A,{text:"Delete",children:(0,m.jsx)(i.A,{variant:"transparent",className:"px-3 arrow-btn danger-arrow font-16 text-decoration-none",onClick:()=>s(null===e||void 0===e?void 0:e.id),children:(0,m.jsx)(c.lr4,{})})})]}):""})]},a))):(0,m.jsx)("tr",{children:(0,m.jsx)("td",{colSpan:"3",className:"font-14",children:(0,m.jsx)("p",{className:"text-danger mb-0",children:"No holidays in this month"})})})})]})})]})})}},11808:(e,a,t)=>{t.d(a,{A:()=>r});var s=t(65043),l=t(25284),n=t(73722),i=t(14282),d=t(62272),o=t(70579);const r=e=>{let{show:a,handleClose:t,handleClick:r,smallLoader:c,header:v,feedbacks:u,submit:m}=e;const[x,p]=(0,s.useState)("");return(0,o.jsxs)(l.A,{show:a,onHide:t,centered:!0,className:"custom-modal",animation:!0,children:[(0,o.jsx)(l.A.Header,{closeButton:!0,className:"border-0 pb-3"}),(0,o.jsxs)(l.A.Body,{children:[(0,o.jsxs)("h3",{className:"popup-heading",children:[v," "]}),(0,o.jsxs)(n.A,{children:[(0,o.jsxs)(n.A.Group,{className:"mb-4",children:[(0,o.jsx)(n.A.Label,{children:u}),(0,o.jsx)(n.A.Control,{as:"textarea",rows:"6",placeholder:"Reasons"===u?"Enter your reason, why you want to reject the leave ?":"Enter your feedback, why you want to reject?",onChange:e=>{p(e.target.value)},required:!0})]}),(0,o.jsx)("div",{className:"text-center",children:(0,o.jsx)(i.A,{variant:"transparent",className:"main-btn px-4",onClick:e=>{let a;a="Reasons"===u?x:{status:"ended",end_reason:x},r(e,a)},disabled:0===(null===x||void 0===x?void 0:x.length),children:c?(0,o.jsx)(d.A,{}):m})})]})]})]})}},76938:(e,a,t)=>{t.r(a),t.d(a,{default:()=>L});var s=t(65043),l=(t(78461),t(44063)),n=t(83003),i=(t(13368),t(70579));const d=e=>{let{data:a}=e;return(0,i.jsx)("div",{children:(0,i.jsxs)("table",{className:"table time-table table-bordered table-ui-custom",children:[(0,i.jsx)("thead",{children:null===a||void 0===a?void 0:a.map((e=>(0,i.jsx)("th",{value:e,className:"time-table-head",children:e},e)))}),(0,i.jsx)("tbody",{})]})})};var o=t(69106),r=t(86178),c=t.n(r),v=t(45394),u=t(33012),m=t(25543),x=t(98394),p=t(1071),h=(t(62272),t(82476));const j=function(e){let{tableData:a,currentTab:t,handleApproveReject:s,approvedLoader:n,approveIndex:d,screenLoader:o}=e;return(0,i.jsx)("div",{children:o?(0,i.jsx)(h.A,{}):(null===a||void 0===a?void 0:a.length)>0?(0,i.jsx)("table",{className:"table time-table table-bordered table-ui-custom",children:(0,i.jsx)("tbody",{children:null===a||void 0===a?void 0:a.map(((e,a)=>{var o,r,x,h,j,b;return(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"time-table-data text-start",children:(0,i.jsxs)("div",{className:"d-flex align-items-center gap-2 white-nowrap",children:[(0,i.jsx)("div",{className:"user-imgbx application-userbx",children:(0,i.jsx)("img",{src:null!==e&&void 0!==e&&null!==(o=e.contract)&&void 0!==o&&null!==(r=o.developer)&&void 0!==r&&r.profile_picture?null===e||void 0===e||null===(x=e.contract)||void 0===x||null===(h=x.developer)||void 0===h?void 0:h.profile_picture:l,className:"user-img"})}),(0,i.jsx)("div",{className:"user-imgbx application-imgbx mx-0 mb-0"}),null===e||void 0===e||null===(j=e.contract)||void 0===j||null===(b=j.developer)||void 0===b?void 0:b.name]})}),(0,i.jsx)("td",{className:"time-table-data text-start",children:(0,i.jsx)("h4",{className:"leave-type-heading mb-0 white-nowrap",children:(0,m.r$)(null===e||void 0===e?void 0:e.type)})}),(0,i.jsx)("td",{className:"time-table-data text-start",children:(0,i.jsxs)("p",{className:"leave-date white-nowrap",children:[c()(null===e||void 0===e?void 0:e.start_date).format("MM-DD-YYYY")," to",c()(e.end_date).format("MM-DD-YYYY")]})}),(0,i.jsx)("td",{className:"time-table-data text-start reason-data",children:(0,i.jsx)("p",{className:"font-14 mb-0",children:null===e||void 0===e?void 0:e.reason_for_leave})}),(0,i.jsx)("td",{className:"time-table-data text-start",children:"first"!==t?(0,i.jsx)("span",{className:"status-finished",children:null===e||void 0===e?void 0:e.approval_status}):(0,i.jsxs)("div",{className:"d-flex justify-content-start gap-2",children:[(0,i.jsx)(u.A,{text:"Approve",children:(0,i.jsx)(p.A,{variant:"transparent",className:"px-3 mb-2 arrow-btn primary-arrow font-16 text-decoration-none",icon:d==a?n:(0,i.jsx)(v.KDk,{}),onClick:()=>s(null===e||void 0===e?void 0:e.id,"approved",a),isLoading:d==a&&n})}),(0,i.jsx)(u.A,{text:"Reject",children:(0,i.jsx)(p.A,{variant:"transparent",className:"px-3 mb-2 arrow-btn danger-arrow font-16 text-decoration-none",icon:(0,i.jsx)(v.lr4,{}),onClick:()=>s(null===e||void 0===e?void 0:e.id,"rejected",a)})})]})})]})}))})}):(0,i.jsx)("div",{className:"simple-no-data",children:(0,i.jsx)(x.A,{})})})};var b=t(5328),f=t(92843),N=t(4970),A=t(11808),g=t(25284),y=t(73722),w=t(61072),C=t(78602),_=t(24858);const S=e=>{var a,t,l,d;let{show:o,handleClose:r,status:c}=e;const v=(0,n.wA)(),{smallLoader:u,btnLoader:m,clientHolidayList:x}=(0,n.d4)((e=>e.clientData)),{register:h,setValue:j,handleSubmit:b,reset:f,formState:{errors:A,isDirty:S,isValid:k,isSubmitting:D}}=(0,_.mN)({});(0,s.useEffect)((()=>{if("edit"==(null===c||void 0===c?void 0:c.status)){const e=null===x||void 0===x?void 0:x.find((e=>e.id==(null===c||void 0===c?void 0:c.id)));console.log(e,"selectedHoliday"),console.log(c,"status"),j("name",null===e||void 0===e?void 0:e.name),j("country",null===e||void 0===e?void 0:e.country),j("description",null===e||void 0===e?void 0:e.description),j("date",null===e||void 0===e?void 0:e.date)}else f()}),[c,x]);return(0,i.jsxs)(g.A,{show:o,onHide:e=>r(e),centered:!0,animation:!0,className:"custom-modal",children:[(0,i.jsx)(g.A.Header,{closeButton:!0,className:"border-0 pb-3"}),(0,i.jsxs)(g.A.Body,{children:["edit"===(null===c||void 0===c?void 0:c.status)?(0,i.jsx)("h3",{className:"popup-heading",children:"Edit Holiday"}):(0,i.jsx)("h3",{className:"popup-heading",children:"Create New Holiday"}),(0,i.jsx)(y.A,{onSubmit:b((async e=>{const a={country:null===e||void 0===e?void 0:e.country,name:null===e||void 0===e?void 0:e.name,description:null===e||void 0===e?void 0:e.description,date:null===e||void 0===e?void 0:e.date};"edit"==(null===c||void 0===c?void 0:c.status)?(await v((0,N.zt)(a,null===c||void 0===c?void 0:c.id)),v((0,N.of)())):(await v((0,N.un)(a)),v((0,N.of)())),r(),f()})),children:(0,i.jsxs)(w.A,{children:[(0,i.jsx)(C.A,{md:12,className:"mb-3",children:(0,i.jsxs)(y.A.Group,{children:[(0,i.jsx)(y.A.Label,{className:"d-block font-14",children:"Holiday Name"}),(0,i.jsx)(y.A.Control,{type:"text",className:"common-field font-14",...h("name",{required:{value:!0,message:"Event name is required"}})}),(0,i.jsx)("p",{className:"error-message",children:null===A||void 0===A||null===(a=A.name)||void 0===a?void 0:a.message})]})}),(0,i.jsx)(C.A,{md:6,className:"mb-3",children:(0,i.jsxs)(y.A.Group,{children:[(0,i.jsx)(y.A.Label,{className:"d-block font-14",children:"Country"}),(0,i.jsx)(y.A.Control,{type:"text",className:"common-field font-14",...h("country",{required:{value:!0,message:"Country is required"}})}),(0,i.jsx)("p",{className:"error-message",children:null===A||void 0===A||null===(t=A.name)||void 0===t?void 0:t.message})]})}),(0,i.jsx)(C.A,{md:6,className:"mb-3",children:(0,i.jsxs)(y.A.Group,{children:[(0,i.jsx)(y.A.Label,{className:"d-block font-14",children:"Description"}),(0,i.jsx)(y.A.Control,{type:"text",className:"common-field font-14",...h("description",{required:{value:!0,message:"Description is required"}})}),(0,i.jsx)("p",{className:"error-message",children:null===A||void 0===A||null===(l=A.name)||void 0===l?void 0:l.message})]})}),(0,i.jsx)(C.A,{md:6,className:"mb-3",children:(0,i.jsxs)(y.A.Group,{children:[(0,i.jsx)(y.A.Label,{className:"d-block font-14",children:"Date"}),(0,i.jsx)(y.A.Control,{type:"date",className:"common-field font-14",min:(new Date).toISOString().split("T")[0],...h("date",{required:{value:!0,message:"Date is required"}})}),(0,i.jsx)("p",{className:"error-message",children:null===A||void 0===A||null===(d=A.date)||void 0===d?void 0:d.message})]})}),(0,i.jsx)(C.A,{md:12,children:(0,i.jsxs)("div",{className:"d-flex align-items-center gap-2 justify-content-center",children:[(0,i.jsx)("div",{className:"text-center ",children:(0,i.jsx)(p.A,{type:"submit",text:"Submit",isLoading:u,disabled:u,className:"main-btn px-4 me-2 font-14 fw-semibold",variant:"transparent"})}),(0,i.jsxs)("div",{className:"text-center",children:[" ",(0,i.jsx)(p.A,{type:"button",variant:"transparent",onClick:r,text:"Cancel",isLoading:m,className:"outline-main-btn font-14 fw-semibold bg-transparent border-black text-black px-4"})]})]})})]})})]})]})};var k=t(82966),D=t(86908);const L=()=>{const e=(0,n.wA)(),[a,t]=(0,s.useState)("first"),{clientHolidayList:l}=(0,n.d4)((e=>e.clientData)),[r,c]=(0,s.useState)(null),[v,x]=(0,s.useState)(null),[p,h]=(0,s.useState)(null),[g,y]=(0,s.useState)({id:"",status:""}),{screenLoader:w,approvedLoader:C,smallLoader:_,clientLeaveHistory:L}=(0,n.d4)((e=>e.clientData)),[E,q]=(0,s.useState)(),[H,I]=(0,s.useState)(!1),[M,R]=(0,s.useState)(!1),[Y,F]=(0,s.useState)(!1),[K,B]=(0,s.useState)();(0,s.useEffect)((()=>{let t;t="first"===a?{approval_status:"under_approval"}:"second"===a?{approval_status:"not_approved"}:"third"===a?{approval_status:"approved"}:{approval_status:"withdrawn"},console.log(t,"data"),e((0,N.vj)(t))}),[a]);(0,s.useEffect)((()=>{e((0,N.of)())}),[]);const[G,T]=(0,s.useState)(new Date),P=(e=>{const a=null===e||void 0===e?void 0:e.map((e=>new Date(null===e||void 0===e?void 0:e.date)));return a})(l);return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(b.A.Container,{id:"left-tabs-example",defaultActiveKey:"devleave-request",children:[(0,i.jsxs)(f.A,{variant:"pills",className:"mb-4 application-pills",children:[(0,i.jsx)(f.A.Item,{className:"application-item",children:(0,i.jsx)(f.A.Link,{className:"application-link",eventKey:"devleave-request",children:"Leave Request"})}),(0,i.jsx)(f.A.Item,{className:"application-item",children:(0,i.jsx)(f.A.Link,{className:"application-link",eventKey:"public-holiday",children:"Public Holiday"})})]}),(0,i.jsxs)(b.A.Content,{children:[(0,i.jsxs)(b.A.Pane,{eventKey:"devleave-request",children:[(0,i.jsx)(o.A,{handleSelect:e=>{t(e)},tabText:m.X4,currentTab:a}),(0,i.jsx)(d,{data:(m.El[m.El.length-1]="first"===a?"Action":"Leave Status",m.El)}),(0,i.jsx)(j,{tableData:L,currentTab:a,handleApproveReject:async(a,t,s)=>{if(console.log(t,"status"),console.log(s,"index"),h(s),q(a),"approved"===t){let s={leaveId:a,approval_status:t,rejection_reason:null};await e((0,N.FM)(s));let l={approval_status:"under_approval"};e((0,N.vj)(l))}else F(!0)},approvedLoader:C,approveIndex:p,screenLoader:w}),Y&&(0,i.jsx)(A.A,{show:Y,handleClose:()=>{F(!1)},header:"Rejection Reason",feedbacks:"Reasons",submit:"Submit",handleClick:async(a,t)=>{let s={leaveId:E,approval_status:"not_approved",rejection_reason:t};await e((0,N.FM)(s));e((0,N.vj)({approval_status:"under_approval"})),F(!Y)},smallLoader:_})]}),(0,i.jsx)(b.A.Pane,{eventKey:"public-holiday",children:(0,i.jsx)(k.A,{onChange:T,value:G,tileContent:e=>{let{date:a,view:t}=e;const s=l.find((e=>new Date(e.date).toDateString()===a.toDateString()));return"month"===t&&P.find((e=>e.toDateString()===a.toDateString()))?(0,i.jsx)(u.A,{text:null===s||void 0===s?void 0:s.name,children:(0,i.jsx)("div",{className:"dot"})}):null},holidayList:l,handleShowEvent:(e,a)=>{R(!M),y({id:e,status:a})},handleDelete:e=>{I(!H),B(e)},handleAproveDisapprove:async(a,t,s)=>{"disapprove"==t?x(s):c(s);const l={action:t};await e((0,N.Vo)(l,a));e((0,N.of)({approval_status:"under_approval"}))},selectedIndex:r,selectedRejectIndex:v,approvedLoader:C})}),(0,i.jsx)(S,{show:M,handleClose:()=>{R(!1)},status:g}),(0,i.jsx)(D.A,{show:H,handleClose:()=>{I(!1)},onClick:async a=>{a.preventDefault(),await e((0,N.Bt)(K)),e((0,N.of)()),I(!1)},smallLoader:_,text:"Are you sure, you want to delete this holiday"})]})]})})}}}]);
//# sourceMappingURL=6938.25145cd1.chunk.js.map