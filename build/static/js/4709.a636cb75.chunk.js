"use strict";(self.webpackChunkrexett=self.webpackChunkrexett||[]).push([[4709],{54922:(e,s,a)=>{a.d(s,{A:()=>g});var l=a(65043),r=a(61072),t=a(78602),o=a(73722),n=a(60184),d=a(3538),i=a(83003),c=a(74117),u=a(4970),m=a(13368),v=a(82476),p=a(1071),x=a(16713),b=a(75210),h=a(22630);var j=a(24858),f=a(2364);var A=a(70579);const y=e=>{var s;let{control:a,name:r,errors:t,options:n,required:d,label:i,type:c}=e;const[u,m]=(0,l.useState)([]);return(0,l.useEffect)((()=>{const e=((e,s)=>{console.log(e,"options inside countries select");let a=[];return a="timezones"===s?null===e||void 0===e?void 0:e.map((e=>({label:e,value:e}))):null===e||void 0===e?void 0:e.map((e=>{let{name:a,code:l,isoCode:r}=e;return{label:a,value:"country"===s?l:r}})),a})(n,c);m(e)}),[n]),(0,A.jsxs)(o.A.Group,{className:"mb-3",children:[(0,A.jsxs)(o.A.Label,{className:"common-label",children:[i,d&&"*"]}),(0,A.jsx)(j.xI,{name:r,control:a,rules:{required:{value:!!d,message:d}},render:e=>{let{field:s}=e;return(0,A.jsx)(f.Ay,{className:"common-field",...s,options:u})}}),t[r]&&(0,A.jsx)("p",{className:"error-message",children:null===(s=t[r])||void 0===s?void 0:s.message})]})};a(37194);const g=e=>{var s;let{role:a}=e;const f=localStorage.getItem("userId"),[g,_]=(0,l.useState)(null),[w,N]=(0,l.useState)(!1),[P,q]=(0,l.useState)(!1),{allTimeZones:C,countriesList:k,statesList:S,citiesList:L,timeZones:F}=(0,i.d4)((e=>e.clientData)),{t:D}=(0,c.Bd)(),{register:T,setValue:z,watch:I,control:E,handleSubmit:Z,formState:{errors:B,isDirty:H,isValid:V,isSubmitting:$}}=(0,j.mN)({}),G=(0,i.wA)(),[Y,K]=(0,l.useState)(!1),[M,O]=(0,l.useState)("inactive"),[R,Q]=(0,l.useState)({firstPass:!1,secondPass:!1}),[U,X]=(0,l.useState)(null),{smallLoader:J,userProfileDetails:W,screenLoader:ee}=(0,i.d4)((e=>e.developerData)),se="AIzaSyABX4LTqTLQGg_b3jFOH8Z6_H5CDqn8tbc";(0,l.useEffect)((()=>{let e=(e=>({developer:"developer/get-profile",admin:"admin/profile",client:"client/get-profile"}[e]))(a);G((0,m.i7)(e)),G((0,u.Zg)())}),[G]),(0,l.useEffect)((()=>{var e,s,a;null!==(e=I("country"))&&void 0!==e&&e.value&&(G((0,u.tM)(null===(s=I("country"))||void 0===s?void 0:s.value)),G((0,u.HM)(null===(a=I("country"))||void 0===a?void 0:a.value)),z("time_zone",null),z("state",null))}),[I("country")]),(0,l.useEffect)((()=>{var e,s,a;null!==(e=I("state"))&&void 0!==e&&e.value&&(G((0,u.YF)(null===(s=I("country"))||void 0===s?void 0:s.value,null===(a=I("state"))||void 0===a?void 0:a.label)),z("city",null))}),[I("state")]),(0,l.useEffect)((()=>{var e,s,a,l,r,t,o,n,d,i,c,u,m;null!==W&&void 0!==W&&W.data&&(z("name",null===W||void 0===W||null===(e=W.data)||void 0===e?void 0:e.name),z("email",null===W||void 0===W||null===(s=W.data)||void 0===s?void 0:s.email),z("phone_number",null===W||void 0===W||null===(a=W.data)||void 0===a?void 0:a.phone_number),z("address",null===W||void 0===W||null===(l=W.data)||void 0===l?void 0:l.address),z("address_2",null===W||void 0===W||null===(r=W.data)||void 0===r?void 0:r.address_2),z("city",null===W||void 0===W||null===(t=W.data)||void 0===t?void 0:t.city),z("country",null===W||void 0===W||null===(o=W.data)||void 0===o?void 0:o.country),z("passcode",null===W||void 0===W||null===(n=W.data)||void 0===n?void 0:n.passcode),z("country",null===W||void 0===W||null===(d=W.data)||void 0===d?void 0:d.country),z("time_zone",null===W||void 0===W||null===(i=W.data)||void 0===i?void 0:i.time_zone),z("state",null===W||void 0===W||null===(c=W.data)||void 0===c?void 0:c.state),null!==W&&void 0!==W&&null!==(u=W.data)&&void 0!==u&&u.is_2FA_enabled?z("is_2FA_enabled",null===W||void 0===W||null===(m=W.data)||void 0===m?void 0:m.is_2FA_enabled):z("is_2FA_enabled",!1))}),[W]);const ae=e=>{if(""===e)return!0;if(!/^(?=.*\d)(?=.*[!@#$%^&*])(?=.*[a-z])(?=.*[A-Z]).{8,}$/.test(e))return"Password must contain at least a symbol, upper and lower case letters and a number";return!0},le=()=>N(!1);return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{children:ee?(0,A.jsx)(v.A,{}):(0,A.jsxs)("form",{onSubmit:Z((e=>{let s=(e=>({developer:"common/update-profile/",admin:"admin/update-profile",client:"client/update-profile/"}[e]))(a),l=new FormData,r=new FormData;for(const a in e)l.append(a,e[a]);if(r.append("file",U),null==U){let a={...e,user_id:f};G((0,m.Vk)(a,s))}else G((0,u.C7)(r,(a=>{let l={...e,profile_picture:a,user_id:f};G((0,m.Vk)(l,s))})))})),noValidate:!0,children:[(0,A.jsxs)(r.A,{className:"mb-4",children:[(0,A.jsx)(t.A,{md:"6",children:(0,A.jsxs)("div",{className:"inner-form",children:[(0,A.jsx)(b.A,{label:D("clientName")+" *",name:"name",control:E,rules:{required:"Name is required"},error:B.name}),(0,A.jsx)(b.A,{label:D("email")+" *",name:"email",control:E,rules:{required:"Email is required",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Invalid email format"}},error:B.email,readOnly:!0}),(0,A.jsx)(b.A,{label:D("previousPassword"),name:"previous_password",control:E,type:R.firstPass?"text":"password",rules:{validate:ae},error:B.previous_password,isPassword:!0,onTogglePassword:()=>Q({...R,firstPass:!R.firstPass}),icon:(0,A.jsx)(n.Ny1,{})}),(0,A.jsx)(b.A,{label:D("newPassword"),name:"password",control:E,type:R.secondPass?"text":"password",rules:{validate:ae},error:B.password,isPassword:!0,onTogglePassword:()=>Q({...R,secondPass:!R.secondPass}),icon:(0,A.jsx)(n.Ny1,{})}),(0,A.jsx)(h.A,{label:D("address")+" *",name:"address",control:E,rules:{required:"Address is required"},error:B.address,apiKey:se,onPlaceSelected:e=>{z("address",e.formatted_address)},onChange:e=>{z("address",e.target.value)},options:{types:["establishment","geocode"]},r:!0}),(0,A.jsx)(h.A,{label:D("address")+" 2",name:"address_2",control:E,rules:{required:!1},error:B.address_2,apiKey:se,onPlaceSelected:e=>{z("address_2",e.formatted_address)},onChange:e=>{z("address_2",e.target.value)},options:{types:["establishment","geocode"]}})]})}),(0,A.jsx)(t.A,{md:"6",children:(0,A.jsxs)("div",{children:[(0,A.jsx)(b.A,{label:D("phone")+"*",name:"phone_number",control:E,type:"text",rules:{required:"Phone Number is required",pattern:{value:/^[0-9]{10}$/,message:"Please enter a valid phone number"}},error:B.phone_number}),(0,A.jsx)(y,{name:"country",errors:B,control:E,required:"Country is required",label:"Country",type:"country",options:k}),(0,A.jsx)(y,{name:"state",errors:B,control:E,required:"State is required",label:"State",type:"state",options:S}),(0,A.jsx)(y,{name:"city",errors:B,control:E,label:"City",type:"city",options:L}),(0,A.jsx)(y,{name:"time_zone",errors:B,type:"timezones",control:E,options:F,required:"Time zone is required",label:"Time Zone"}),(0,A.jsx)(b.A,{label:D("postCode")+"*",name:"passcode",control:E,rules:{required:"Postcode is required",pattern:{value:/^[0-9]+$/,message:"Postcode should only contain numbers"}},error:B.passcode}),(0,A.jsx)(o.A.Label,{children:"Image*"}),(0,A.jsxs)(o.A.Label,{htmlFor:"developer-image",className:"upload-image-label d-block",children:[(0,A.jsx)(d.pT4,{}),D("uploadImage")]}),(0,A.jsx)(j.xI,{name:"profile_picture",control:E,rules:{required:!1},render:e=>{let{field:s}=e;return(0,A.jsx)("input",{...s,id:"developer-image",className:"visually-hidden common-field",type:"file",accept:"image/*",onChange:e=>(e=>{const s=e.target.files[0];if(X(s),s){const e=new FileReader;e.onloadend=()=>{_(e.result)},e.readAsDataURL(s)}})(e)})}}),(0,A.jsx)("div",{children:(0,A.jsx)("img",{src:g||(null===W||void 0===W||null===(s=W.data)||void 0===s?void 0:s.profile_picture),alt:"Selected",className:"uploaded-image"})})]})}),(0,A.jsx)(t.A,{md:"6",children:(0,A.jsxs)(o.A.Group,{className:"mb-3",children:[(0,A.jsx)(o.A.Label,{className:"common-label",children:"Enable Two Factor Authentication"}),(0,A.jsx)("div",{class:"form-check form-switch toggle-switch-wrapper",children:(0,A.jsx)(j.xI,{name:"is_2FA_enabled",control:E,render:e=>{let{field:s}=e;return(0,A.jsx)("input",{...s,onChange:e=>{(e=>{const{checked:s}=null===e||void 0===e?void 0:e.target;N(!w),q(s)})(e)},checked:!0===I("is_2FA_enabled"),class:"form-check-input toggle-switch-custom",type:"checkbox",role:"switch"})}})})]})})]}),(0,A.jsx)("div",{className:"text-center",children:(0,A.jsx)(p.A,{type:"submit",text:D("updateProfile"),className:"main-btn px-5",variant:"transparent",disabled:J,isLoading:J})})]})}),(0,A.jsx)(x.A,{show:Y,handleClose:()=>{O(!M),K(!1)},onClick:()=>{let e={user_id:+f,status:M};G((0,u.Ts)(e))},smallLoader:J,text:"Are you sure, you want to disable your account"}),w&&(0,A.jsx)(x.A,{show:w,handleClose:le,handleAction:()=>{z("is_2FA_enabled",P),le()},smallLoader:J,text:"Are you sure, you want to ".concat(P?"enable":"disable"," two factor authentication")})]})}},33027:(e,s,a)=>{a.d(s,{A:()=>t});a(65043);var l=a(74117),r=a(70579);const t=e=>{let{children:s}=e;const{t:a}=(0,l.Bd)();return(0,r.jsxs)("section",{className:"card-box",children:[(0,r.jsx)("div",{className:"d-flex gap-3 align-items-center pb-2 mb-3 border-bottom-grey",children:(0,r.jsx)("h2",{className:"section-head-sub mb-0 border-0",children:a("updateYourProfile")})}),s]})}},34709:(e,s,a)=>{a.r(s),a.d(s,{default:()=>o});a(65043);var l=a(54922),r=a(33027),t=a(70579);const o=()=>(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(r.A,{children:(0,t.jsx)(l.A,{role:"admin"})})})})},16713:(e,s,a)=>{a.d(s,{A:()=>d});a(65043);var l=a(25284),r=a(73722),t=a(14282),o=a(1071),n=(a(4970),a(70579));const d=e=>{let{text:s,show:a,handleClose:d,onClick:i,handleAction:c,smallLoader:u,type:m,startDate:v,endDate:p}=e;return(0,n.jsxs)(l.A,{show:a,onHide:e=>d(e),centered:!0,animation:!0,className:"custom-modal",children:[(0,n.jsx)(l.A.Header,{closeButton:!0,className:"border-0 pb-3"}),(0,n.jsx)(l.A.Body,{children:(0,n.jsxs)(r.A,{children:[(0,n.jsx)(r.A.Group,{className:"mb-4",children:(0,n.jsx)(r.A.Label,{className:"d-block text-center",children:s})}),(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)(o.A,{type:"submit",text:"Yes",onClick:m?e=>{i(e,{status:m})}:c,className:"main-btn px-4 me-3 font-14 fw-semibold",variant:"transparent",disabled:u,isLoading:u}),(0,n.jsx)(t.A,{variant:"transparent",onClick:d,className:"outline-main-btn font-14 fw-semibold bg-transparent border-black text-black px-4",children:"No"})]})]})})]})}}}]);
//# sourceMappingURL=4709.a636cb75.chunk.js.map